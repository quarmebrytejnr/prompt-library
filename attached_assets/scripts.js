// Prompt Data
const prompts = {
    'hook-crafter': `## 🎯 "Hook‑Crafter" Prompt — Opening‑Slide Generator
 
Before we begin, I need a few quick inputs:
 
1. **Brand / Project Name**  
2. **Market / Region Focus**  
3. **Brief Excerpt or Core Pain Points** (3–5 key lines)  
4. **Optional Public Facts / Links** (if any)
 
Once I have these, I'll generate high-impact content for your opening slide.
 
---
 
**Role & Voice**  
You are a punchy copy‑chef who turns business pain into irresistible presentation openers.  
Tone: bold, evocative, zero fluff.
 
---
 
**Deliverables (in this order):**
 
1. **Shock Stats**  
   - Provide **3 surprising, sourced data points** (≤ 20 words each) relevant to the brand's pain or ambition.  
   - Cite source within the line.  
   - **Bold the strongest stat.**
 
2. **Cultural Analogies**  
   - Craft **2 analogies** linking the brand's pain to a cultural reference or everyday ritual familiar to the market.  
   - Keep each ≤ 25 words.  
   - **Bold the strongest analogy.**
 
3. **Competitive Cliff‑Hanger**  
   - Write **1 suspense sentence** hinting a rival will seize the moment if the brand delays (≤ 25 words).  
   - **Bold this sentence.**
 
4. **Micro‑Story Spark**  
   - Draft a **50‑word anecdote** about a single consumer that personifies the pain or opportunity.  
   - **Bold the most emotionally charged sentence.**
 
5. **Sensory Metaphor**  
   - Give **1 vivid metaphor** (≤ 20 words) comparing the challenge or offer to a sensory experience.  
   - **Bold the metaphor.**
 
---
 
**Formatting Rules**  
- Use numbered lists under each section.  
- **Bold** the single strongest line in every section.  
- No intros, outros, or extra commentary—jump straight to outputs.
 
---
 
**Now let's begin—please enter the following:**
1. Brand / Project Name:  
2. Market / Region:  
3. Brief Excerpt / Core Pain Points:  
4. Optional Public Facts / Links (if any):`,

    'category-intel': `## 🌐 "Category Intel Lab" Prompt — Deep‑Research Pack
 
Before we dive into the intelligence pack, I need a few key inputs from you:
 
1. **Brand / Project Name:**
2. **Category (e.g., Premium Patisserie, Teleco SaaS, OTC Skincare):**
3. **Primary Market(s) (e.g., KSA, GCC, EU‑5):**
4. **Brief Excerpt (pain + ambition) — 3–5 lines from the brief:**
5. **Named Competitors (list 3–6):**
6. **Time Horizon (e.g., 12–24 months):**
 
---
 
## Role & Voice
You are a senior category strategist, cultural anthropologist, and media scientist rolled into one.
Tone: insight‑dense, jargon‑light, immediately actionable.
 
---
 
## Deliverables (in this order)
 
1. **Category 360 Snapshot**
- Market size & YOY growth
- Seasonal spikes & headwinds  
- Regulatory or supply‑chain watch‑outs
- **Bold the most surprising stat.**
 
2. **Competitive Heat‑Map**
- Markdown Table → *Competitor | Distinctive Asset | Channel Strength | Recent Move | Vulnerability*
- Star (★) the vulnerability we can exploit fastest.
 
3. **Audience Segmentation & Pain Points**
- 3–4 segments (demographic + psychographic)
- For each: "Pain | Aspiration | Preferred media touchpoint"
- Highlight the *segment no one is fighting for yet*.
 
4. **Cultural & Trend Radar**
- 3 macro‑trends (≤ 60 words each)
- 3 micro‑signals (≤ 30 words each, include link if possible)
- Tag each as [Accelerating] or [Maturing]
 
5. **Media & Channel Intelligence**
- Top paid & organic channels by ROI
- Emerging formats gaining traction (e.g., TikTok Shops, DOOH programmatic)
- One contrarian channel worth testing
 
6. **Data & Measurement Ecosystem**
- Key first‑party data sources brand could leverage
- Third‑party data gaps + potential partners
- Suggested KPI stack (leading & lagging)
 
7. **Marketer's Top‑5 Challenges**
- Bullet list of issues keeping the CMO awake
- **Bold the biggest career‑risk KPI.**
 
8. **Whitespace Opportunities & POV**
- Markdown Table → *Untapped Angle | 1‑Line Spark Idea | Supporting Proof*
- Include at least one cross‑industry analogy
 
9. **Gen‑AI Leverage Points**
- 3 workflow stages (e.g., research, creative, ops) where AI can save ≥ 30 % time or cost
 
---
 
## Formatting Rules
- One numbered section per deliverable
- Use markdown tables where noted
- Keep total response ≤ 900 words
- Highlight section headers in **bold**
- No executive summary — outputs should stand alone
 
---
 
## Ask‑Back (only if needed)
If critical data is missing, list max 3 bullet queries under **"Info Gaps."**
 
---
 
**Now let's get started — please enter the following inputs one by one:**
1. Brand / Project Name:
2. Category:
3. Primary Market(s):
4. Brief Excerpt (pain + ambition):
5. Named Competitors:
6. Time Horizon:`,

    'pitch-experience': `## 🎭 "Pitch‑Experience Ideator"
Before we begin, please provide the following inputs:
1. **Pitch‑on‑a‑Page:**  
   → Copy the full text table here.
2. **Storyboard Frames (optional):**  
   → Briefly describe any slide titles or flow you've drafted.
---
Once you provide the above inputs, I will generate the experiential pitch concepts.
---
### Model Instructions
You are an **experiential pitch designer** who turns a finished narrative into sensory, unforgettable theatre.  
Tone: imaginative, on‑brand, and deliverable within a 1‑hour client meeting.
---
### Deliverables
1. **Signature Hook Prop**  
   - **One physical or sensory object** that lands the opening message in <30 sec.  
   - **Bold the most unexpected prop.**
2. **Room Immersion Idea**  
   - How the **space, sight, sound, scent, or taste** reinforces the proposition throughout.  
   - Keep it ≤ 40 words.
3. **Interactive Moment**  
   - A **2‑minute audience participation or reveal** that ties to the story type (e.g., challenger "enemy smash," accelerator "speed dial").  
   - Highlight the boldest concept.
4. **Leave‑Behind Keepsake**  
   - A **small item the client takes away**; must echo the hook and carry a CTA/QR.  
   - ≤ 40 words.
5. **Follow‑Up Surprise**  
   - **Digital or physical touchpoint** within 24 hours that re‑ignites the memory.  
   - Keep it succinct.
6. **Materials & Prep Checklist**  
   - Bullet list of **what to source or build**, with owner tags.  
   - **Bold the most crucial item.**
---
### Formatting Rules
- Use numbered sections 1‑6.  
- **Bold the most daring idea** in each section.  
- Keep each description ≤ 40 words.  
- No intros, outros, or extra commentary — jump straight to outputs.
---
**Now let's begin — please enter the following inputs one by one:**
1. Pitch‑on‑a‑Page (Paste the full text table):  
2. Storyboard Frames (optional) - Briefly describe any slide titles or flow you've drafted:`
};

// DOM Elements
const modal = document.getElementById('prompt-modal');
const modalContent = document.getElementById('modal-content');
const closeModal = document.querySelector('.close-modal');
const viewButtons = document.querySelectorAll('.view-btn');
const copyButtons = document.querySelectorAll('.copy-btn');
const filterButtons = document.querySelectorAll('.filter-btn');
const promptCards = document.querySelectorAll('.prompt-card');
const menuToggle = document.querySelector('.menu-toggle');
const navLinks = document.querySelector('.nav-links');

// Open modal and display prompt content
function displayPrompt(promptId) {
    const prompt = prompts[promptId];
    
    if (!prompt) return;
    
    // Create prompt content
    modalContent.innerHTML = `
        <h2>${promptId === 'hook-crafter' ? 'Hook‑Crafter' : 
               promptId === 'category-intel' ? 'Category Intel Lab' : 'Pitch‑Experience Ideator'}</h2>
        <div class="prompt-content">${prompt}</div>
        <div class="copy-area">
            <button class="btn primary" id="modal-copy-btn" data-prompt="${promptId}">
                <i class="fas fa-copy"></i> Copy Prompt
            </button>
            <span class="copy-message">Copied to clipboard!</span>
        </div>
    `;
    
    // Show modal
    modal.style.display = 'block';
    
    // Add event listener to the copy button
    const modalCopyBtn = document.getElementById('modal-copy-btn');
    modalCopyBtn.addEventListener('click', () => copyPrompt(promptId, true));
    
    // Disable scrolling on the background
    document.body.style.overflow = 'hidden';
}

// Copy prompt to clipboard
function copyPrompt(promptId, isModal = false) {
    const prompt = prompts[promptId];
    
    if (!prompt) return;
    
    // Copy to clipboard
    navigator.clipboard.writeText(prompt).then(() => {
        // Show copied message
        const copyMessage = isModal ? 
            document.querySelector('.modal .copy-message') : 
            document.createElement('span');
            
        if (isModal) {
            copyMessage.style.display = 'block';
            setTimeout(() => {
                copyMessage.style.display = 'none';
            }, 2000);
        } else {
            copyMessage.className = 'copy-message';
            copyMessage.textContent = 'Copied to clipboard!';
            copyMessage.style.display = 'block';
            
            const button = document.querySelector(`[data-prompt="${promptId}"].copy-btn`);
            const parent = button.parentNode;
            parent.appendChild(copyMessage);
            
            setTimeout(() => {
                copyMessage.remove();
            }, 2000);
        }
    }).catch(err => {
        console.error('Failed to copy: ', err);
    });
}

// Filter prompts
function filterPrompts(category) {
    promptCards.forEach(card => {
        if (category === 'all' || card.dataset.category === category) {
            card.style.display = 'block';
            setTimeout(() => {
                card.classList.add('fade-in');
            }, 100);
        } else {
            card.classList.remove('fade-in');
            card.style.display = 'none';
        }
    });
}

// Toggle mobile menu
function toggleMobileMenu() {
    navLinks.classList.toggle('active');
    menuToggle.classList.toggle('active');
}

// Initialize scroll animations
function initScrollAnimations() {
    // Configure ScrollReveal
    const sr = ScrollReveal({
        origin: 'bottom',
        distance: '30px',
        duration: 1000,
        delay: 200,
        easing: 'ease',
        reset: false
    });

    // Animate prompt cards
    sr.reveal('.prompt-card', {
        interval: 100,
        delay: 200,
        origin: 'bottom',
        distance: '20px'
    });

    // Animate section titles
    sr.reveal('.section-title', {
        origin: 'top',
        distance: '20px',
        delay: 100
    });

    // Animate about section
    sr.reveal('.about-section p', {
        interval: 200,
        origin: 'bottom',
        distance: '20px',
        delay: 300
    });

    // Animate filter buttons
    sr.reveal('.filter-btn', {
        interval: 100,
        origin: 'top',
        distance: '10px',
        delay: 200
    });
}

// Event Listeners
viewButtons.forEach(button => {
    button.addEventListener('click', () => {
        const promptId = button.dataset.prompt;
        displayPrompt(promptId);
    });
});

copyButtons.forEach(button => {
    button.addEventListener('click', () => {
        const promptId = button.dataset.prompt;
        copyPrompt(promptId);
    });
});

closeModal.addEventListener('click', () => {
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
});

window.addEventListener('click', (event) => {
    if (event.target === modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }
});

filterButtons.forEach(button => {
    button.addEventListener('click', () => {
        // Remove active class from all buttons
        filterButtons.forEach(btn => btn.classList.remove('active'));
        
        // Add active class to clicked button
        button.classList.add('active');
        
        // Filter prompts
        const category = button.dataset.filter;
        filterPrompts(category);
    });
});

// Mobile menu toggle
menuToggle.addEventListener('click', toggleMobileMenu);

// Close mobile menu when clicking outside
document.addEventListener('click', (event) => {
    if (!event.target.closest('.menu-toggle') && 
        !event.target.closest('.nav-links') && 
        window.innerWidth <= 768 &&
        navLinks.classList.contains('active')) {
        toggleMobileMenu();
    }
});

// Resize event handler for mobile menu
window.addEventListener('resize', () => {
    if (window.innerWidth > 768) {
        navLinks.style.display = 'flex';
        navLinks.classList.remove('active');
    } else {
        navLinks.style.display = navLinks.classList.contains('active') ? 'flex' : 'none';
    }
});

// Smooth scroll for anchor links with active state management
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Close mobile menu
        if (window.innerWidth <= 768 && navLinks.classList.contains('active')) {
            toggleMobileMenu();
        }
        
        // Get the target element
        const targetId = this.getAttribute('href');
        const target = document.querySelector(targetId);
        
        // Scroll to target with smooth behavior
        if (target) {
            const headerHeight = document.querySelector('nav').offsetHeight;
            const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - headerHeight;
            
            window.scrollTo({
                top: targetPosition,
                behavior: 'smooth'
            });
            
            // Update active class on nav links
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
            });
            this.classList.add('active');
        }
    });
});

// Update active nav item on scroll
window.addEventListener('scroll', () => {
    const sections = document.querySelectorAll('section, header');
    const navLinks = document.querySelectorAll('.nav-links a');
    
    let current = '';
    
    sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        
        if (pageYOffset >= sectionTop - 200) {
            current = section.getAttribute('id');
        }
    });
    
    navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) {
            link.classList.add('active');
        }
    });
});

// Initialize (Run on page load)
function init() {
    // Ensure proper display of mobile menu based on screen size
    if (window.innerWidth > 768) {
        navLinks.style.display = 'flex';
    } else {
        navLinks.style.display = 'none';
    }
    
    // Add fade-in class to cards for initial load animation
    promptCards.forEach(card => {
        card.classList.add('fade-in');
    });
    
    // Initialize scroll animations
    initScrollAnimations();
}

// Run initialization when DOM is loaded
document.addEventListener('DOMContentLoaded', init);
